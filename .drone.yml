pipeline:
  install:
    image: node:dubnium
    commands:
      - yarn install --frozen-lockfile

  test:
    image: node:dubnium
    commands:
      - yarn test

  deploy:
    image: node:dubnium
    secrets:
      [
        site_base_url,
        gatsby_site_base_url,
        gatsby_initiatives_api,
        site_folder,
        gatsby_site_folder,
        netlify_auth_token,
        netlify_site_id,
        basic_auth_username,
        basic_auth_password,
      ]
    commands:
      - yarn deploy
